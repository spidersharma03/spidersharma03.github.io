
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>periodic_motion</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, height=device-height, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <script src="../../js/lib/dyGraph/dygraph-combined-dev.js"></script>
        
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.1/jquery-ui.min.js"></script>

        <link rel='stylesheet' href='http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css' />
    
        <script src="../../js/lib/dyGraph/super-annotations.js"></script>
        <script src="../../js/lib/dyGraph/hairlines.js"></script>
        <script src="../../labs/kinematics_1d/CustomKinematicsGraphOperations.js"></script>
        <style>
            .hairline-info {
                border: 1px solid black;
                border-top-right-radius: 5px;
                border-bottom-right-radius: 5px;

                display: table;  /* shrink to fit */
                min-width: 30px;
                min-height: 20px;
                z-index: 10;  /* should appear on top of the chart */
                padding: 3px;
                background: white;
                font-size: 14px;
                cursor: move;
            }

            .dygraph-hairline {
                /* border-right-style: dotted !important; */
                cursor: move;
            }

            .dygraph-hairline.selected div {
                left: 2px !important;
                width: 2px !important;
            }
            .hairline-info.selected {
                border: 2px solid black;
                padding: 2px;
            }

            .annotation-info {
                background: white;
                border-width: 1px;
                border-style: solid;
                padding: 4px;
                display: table;  /* shrink to fit */
                box-shadow: 0 0 4px gray;
                cursor: move;

                min-width: 120px;  /* prevents squishing at the right edge of the chart */
            }
            .annotation-info.editable {
                min-width: 180px;  /* prevents squishing at the right edge of the chart */
            }

            .dygraph-annotation-line {
                box-shadow: 0 0 4px gray;
            }
        </style>  
    </head>
    <body>
        
        <div id="hairline-template" class="hairline-info" style="display:none; background-color : rgba(100, 100, 255, 0.4);;">
            <!--<button class='hairline-kill-button'>Kill</button>-->
            <div class='hairline-legend'></div>
        </div>
        <div id="annotation-template" class="annotation-info" style="display:none">
            <div>{{text}}</div>
            <div>{{x}}, {{series}}: {{y}}</div>
        </div>
        <div id="annotation-editable-template" class="annotation-info" style="display:none">
            <button class='annotation-kill-button'>Delete</button>
            <button class='annotation-update'>Change</button>
            <button class='annotation-cancel'>Cancel</button><br/>
            <input dg-ann-field='text' type='text' size=20 value='{{text}}' />
            <div>{{x}}, {{series}}: {{y}}</div>
        </div>

        <div>
            <div id="graphDiv" style="float: left; border: solid 1px lightskyblue"></div>
            <div id="labels" style="float: contour;"></div>
        </div>
        <script src="../../labs/common/model_graph.js"></script>
        <script>
    var hairlines = new Dygraph.Plugins.Hairlines({
    divFiller: function (div, data) {
        return;
        if(hairlines.type > 1) {
            return;
        }
        var newpoints = [];
        if(hairlines.type !== 3) {
            newpoints.push(data.points[hairlines.type]);
        }
        else {
            newpoints = data.points;
        }
        var html = Dygraph.Plugins.Legend.generateLegendHTML(
                data.dygraph, data.hairline.xval, newpoints, 10);
        $('.hairline-legend', div).html(html);
        $(div).data({xval: data.hairline.xval});
    }
});
hairlines.type = 3;
annotations = new Dygraph.Plugins.SuperAnnotations({
    defaultAnnotationProperties: {
        'text': 'Annotation Description'
    }
});
var options = {
    labels: ['t', 'x', 'v', 'a'],
//    labelsDiv: document.getElementById("labels"),
    xlabel: 'Time',
    ylabel: 'Position/Velocity/Acceleration',
    legend: 'always',
//    animatedZooms: true,
//    labelsDivWidth: 100,
//    labelsDivStyles: {
//      'backgroundColor': 'rgba(200, 200, 255, 0.1)',
//      'padding': '4px',
//      'border': '1px solid black',
//      'borderRadius': '10px',
//      'boxShadow': '4px 4px 4px #888'
//    },
//    labelsSeparateLines: true,
    yAxisLabelWidth: 20,
    axes: {
                  x: {
                    valueFormatter: function(val) {
                      return val.toFixed(2);
                    }
                  },
                  y: {
                      pixelsPerLabel: 50
                  }
                },
    title: 'Kinematics',
    // Set the plug-ins in the options.
                plugins : [
                  hairlines
                ]
};
document.modelGraph = new Model_Graph(document.getElementById("graphDiv"), options, 4);
document.modelGraph.hairlines = hairlines;
document.modelGraph.labelDiv = document.getElementById("labels");
var customGraphOperations = new CustomKinematicsGraphOperations(document.modelGraph);
customGraphOperations.changeProbeType(0);
document.modelGraph.customGraphOperations = customGraphOperations;
            
$(hairlines).on('hairlineCreated', function(e) {
        var hl = this.get();
        if(hl.length > 2) {
            hl.pop();
            this.set(hl);
        }
      });

     $(hairlines).on('hairlineMoved', customGraphOperations.hairlineProbeChanges);
 
        </script>
    </body>
</html>
