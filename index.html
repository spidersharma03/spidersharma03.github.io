<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="1187.4">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; min-height: 14.0px}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times}
    span.s1 {text-decoration: underline ; color: #0000ee}
    td.td1 {margin: 0.5px 0.5px 0.5px 0.5px; padding: 1.0px 1.0px 1.0px 1.0px}
    td.td2 {width: 715.0px; margin: 0.5px 0.5px 0.5px 0.5px; padding: 1.0px 1.0px 1.0px 1.0px}
  </style>
</head>
<body>
<table cellspacing="0" cellpadding="0">
  <tbody>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">&lt;!DOCTYPE html&gt;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">&lt;html lang="en"&gt;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">&lt;head&gt;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">&lt;title&gt;three.js canvas - geometry - birds&lt;/title&gt;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">&lt;meta charset="utf-8"&gt;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">&lt;meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"&gt;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">&lt;style&gt;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">body {</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">color: #808080;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">font-family:Monospace;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">font-size:13px;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">text-align:center;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">background-color: #ffffff;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">margin: 0px;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">overflow: hidden;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">}</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">#info {</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">position: absolute;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">top: 0px; width: 100%;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">padding: 5px;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">}</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">&lt;/style&gt;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">&lt;/head&gt;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">&lt;body&gt;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">&lt;div id="container"&gt;&lt;/div&gt;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">&lt;div id="info"&gt;&lt;a href="<a href="http://threejs.org/"><span class="s1">http://threejs.org</span></a>" target="_blank"&gt;three.js&lt;/a&gt; - birds demo&lt;/div&gt;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">&lt;script src="<a href="applewebdata://2CF82655-124C-466C-BD02-2F29E9BEAAE4/build/three.min.js"><span class="s1">../build/three.min.js</span></a>"&gt;&lt;/script&gt;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">&lt;script src="<a href="applewebdata://2CF82655-124C-466C-BD02-2F29E9BEAAE4/obj/Bird.js"><span class="s1">obj/Bird.js</span></a>"&gt;&lt;/script&gt;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">&lt;script src="<a href="applewebdata://2CF82655-124C-466C-BD02-2F29E9BEAAE4/js/libs/stats.min.js"><span class="s1">js/libs/stats.min.js</span></a>"&gt;&lt;/script&gt;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">&lt;script&gt;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">// Based on http://www.openprocessing.org/visuals/?visualID=6910</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">var Boid = function() {</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">var vector = new THREE.Vector3(),</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">_acceleration, _width = 500, _height = 500, _depth = 200, _goal, _neighborhoodRadius = 100,</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">_maxSpeed = 4, _maxSteerForce = 0.1, _avoidWalls = false;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">this.position = new THREE.Vector3();</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">this.velocity = new THREE.Vector3();</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">_acceleration = new THREE.Vector3();</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">this.setGoal = function ( target ) {</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">_goal = target;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">}</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">this.setAvoidWalls = function ( value ) {</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">_avoidWalls = value;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">}</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">this.setWorldSize = function ( width, height, depth ) {</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">_width = width;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">_height = height;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">_depth = depth;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">}</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">this.run = function ( boids ) {</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">if ( _avoidWalls ) {</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">vector.set( - _width, this.position.y, this.position.z );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">vector = this.avoid( vector );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">vector.multiplyScalar( 5 );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">_acceleration.add( vector );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">vector.set( _width, this.position.y, this.position.z );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">vector = this.avoid( vector );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">vector.multiplyScalar( 5 );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">_acceleration.add( vector );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">vector.set( this.position.x, - _height, this.position.z );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">vector = this.avoid( vector );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">vector.multiplyScalar( 5 );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">_acceleration.add( vector );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">vector.set( this.position.x, _height, this.position.z );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">vector = this.avoid( vector );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">vector.multiplyScalar( 5 );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">_acceleration.add( vector );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">vector.set( this.position.x, this.position.y, - _depth );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">vector = this.avoid( vector );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">vector.multiplyScalar( 5 );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">_acceleration.add( vector );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">vector.set( this.position.x, this.position.y, _depth );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">vector = this.avoid( vector );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">vector.multiplyScalar( 5 );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">_acceleration.add( vector );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">}/* else {</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">this.checkBounds();</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">}</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">*/</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">if ( Math.random() &gt; 0.5 ) {</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">this.flock( boids );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">}</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">this.move();</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">}</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">this.flock = function ( boids ) {</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">if ( _goal ) {</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">_acceleration.add( this.reach( _goal, 0.005 ) );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">}</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">_acceleration.add( this.alignment( boids ) );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">_acceleration.add( this.cohesion( boids ) );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">_acceleration.add( this.separation( boids ) );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">}</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">this.move = function () {</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">this.velocity.add( _acceleration );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">var l = this.velocity.length();</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">if ( l &gt; _maxSpeed ) {</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">this.velocity.divideScalar( l / _maxSpeed );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">}</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">this.position.add( this.velocity );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">_acceleration.set( 0, 0, 0 );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">}</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">this.checkBounds = function () {</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">if ( this.position.x &gt; _width ) this.position.x = - _width;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">if ( this.position.x &lt; - _width ) this.position.x = _width;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">if ( this.position.y &gt; _height ) this.position.y = - _height;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">if ( this.position.y &lt; - _height ) this.position.y = _height;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">if ( this.position.z &gt; _depth ) this.position.z = - _depth;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">if ( this.position.z &lt; - _depth ) this.position.z = _depth;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">}</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">//</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">this.avoid = function ( target ) {</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">var steer = new THREE.Vector3();</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">steer.copy( this.position );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">steer.sub( target );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">steer.multiplyScalar( 1 / this.position.distanceToSquared( target ) );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">return steer;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">}</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">this.repulse = function ( target ) {</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">var distance = this.position.distanceTo( target );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">if ( distance &lt; 150 ) {</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">var steer = new THREE.Vector3();</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">steer.subVectors( this.position, target );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">steer.multiplyScalar( 0.5 / distance );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">_acceleration.add( steer );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">}</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">}</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">this.reach = function ( target, amount ) {</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">var steer = new THREE.Vector3();</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">steer.subVectors( target, this.position );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">steer.multiplyScalar( amount );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">return steer;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">}</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">this.alignment = function ( boids ) {</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">var boid, velSum = new THREE.Vector3(),</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">count = 0;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">for ( var i = 0, il = boids.length; i &lt; il; i++ ) {</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">if ( Math.random() &gt; 0.6 ) continue;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">boid = boids[ i ];</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">distance = boid.position.distanceTo( this.position );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">if ( distance &gt; 0 &amp;&amp; distance &lt;= _neighborhoodRadius ) {</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">velSum.add( boid.velocity );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">count++;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">}</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">}</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">if ( count &gt; 0 ) {</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">velSum.divideScalar( count );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">var l = velSum.length();</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">if ( l &gt; _maxSteerForce ) {</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">velSum.divideScalar( l / _maxSteerForce );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">}</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">}</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">return velSum;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">}</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">this.cohesion = function ( boids ) {</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">var boid, distance,</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">posSum = new THREE.Vector3(),</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">steer = new THREE.Vector3(),</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">count = 0;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">for ( var i = 0, il = boids.length; i &lt; il; i ++ ) {</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">if ( Math.random() &gt; 0.6 ) continue;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">boid = boids[ i ];</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">distance = boid.position.distanceTo( this.position );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">if ( distance &gt; 0 &amp;&amp; distance &lt;= _neighborhoodRadius ) {</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">posSum.add( boid.position );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">count++;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">}</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">}</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">if ( count &gt; 0 ) {</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">posSum.divideScalar( count );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">}</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">steer.subVectors( posSum, this.position );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">var l = steer.length();</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">if ( l &gt; _maxSteerForce ) {</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">steer.divideScalar( l / _maxSteerForce );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">}</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">return steer;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">}</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">this.separation = function ( boids ) {</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">var boid, distance,</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">posSum = new THREE.Vector3(),</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">repulse = new THREE.Vector3();</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">for ( var i = 0, il = boids.length; i &lt; il; i ++ ) {</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">if ( Math.random() &gt; 0.6 ) continue;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">boid = boids[ i ];</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">distance = boid.position.distanceTo( this.position );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">if ( distance &gt; 0 &amp;&amp; distance &lt;= _neighborhoodRadius ) {</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">repulse.subVectors( this.position, boid.position );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">repulse.normalize();</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">repulse.divideScalar( distance );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">posSum.add( repulse );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">}</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">}</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">return posSum;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">}</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">}</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">&lt;/script&gt;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">&lt;script&gt;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">var SCREEN_WIDTH = window.innerWidth,</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">SCREEN_HEIGHT = window.innerHeight,</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">SCREEN_WIDTH_HALF = SCREEN_WIDTH / 2,</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">SCREEN_HEIGHT_HALF = SCREEN_HEIGHT / 2;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">var camera, scene, renderer,</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">birds, bird;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">var boid, boids;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">var stats;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">init();</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">animate();</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">function init() {</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">camera = new THREE.PerspectiveCamera( 75, SCREEN_WIDTH / SCREEN_HEIGHT, 1, 10000 );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">camera.position.z = 450;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">scene = new THREE.Scene();</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">birds = [];</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">boids = [];</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">for ( var i = 0; i &lt; 200; i ++ ) {</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">boid = boids[ i ] = new Boid();</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">boid.position.x = Math.random() * 400 - 200;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">boid.position.y = Math.random() * 400 - 200;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">boid.position.z = Math.random() * 400 - 200;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">boid.velocity.x = Math.random() * 2 - 1;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">boid.velocity.y = Math.random() * 2 - 1;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">boid.velocity.z = Math.random() * 2 - 1;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">boid.setAvoidWalls( true );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">boid.setWorldSize( 500, 500, 400 );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">bird = birds[ i ] = new THREE.Mesh( new Bird(), new THREE.MeshBasicMaterial( { color:Math.random() * 0xffffff, side: THREE.DoubleSide } ) );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">bird.phase = Math.floor( Math.random() * 62.83 );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">bird.position = boids[ i ].position;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">scene.add( bird );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">}</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">renderer = new THREE.CanvasRenderer();</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">renderer.setClearColor( 0xffffff );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">renderer.setSize( SCREEN_WIDTH, SCREEN_HEIGHT );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">document.addEventListener( 'mousemove', onDocumentMouseMove, false );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">document.body.appendChild( renderer.domElement );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">stats = new Stats();</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">stats.domElement.style.position = 'absolute';</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">stats.domElement.style.left = '0px';</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">stats.domElement.style.top = '0px';</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">document.getElementById( 'container' ).appendChild(stats.domElement);</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">//</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">window.addEventListener( 'resize', onWindowResize, false );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">}</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">function onWindowResize() {</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">camera.aspect = window.innerWidth / window.innerHeight;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">camera.updateProjectionMatrix();</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">renderer.setSize( window.innerWidth, window.innerHeight );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">}</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">function onDocumentMouseMove( event ) {</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">var vector = new THREE.Vector3( event.clientX - SCREEN_WIDTH_HALF, - event.clientY + SCREEN_HEIGHT_HALF, 0 );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">for ( var i = 0, il = boids.length; i &lt; il; i++ ) {</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">boid = boids[ i ];</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">vector.z = boid.position.z;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">boid.repulse( vector );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">}</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">}</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">//</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">function animate() {</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">requestAnimationFrame( animate );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">render();</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">stats.update();</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">}</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">function render() {</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">for ( var i = 0, il = birds.length; i &lt; il; i++ ) {</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">boid = boids[ i ];</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">boid.run( boids );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">bird = birds[ i ];</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">color = bird.material.color;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">color.r = color.g = color.b = ( 500 - bird.position.z ) / 1000;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">bird.rotation.y = Math.atan2( - boid.velocity.z, boid.velocity.x );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">bird.rotation.z = Math.asin( boid.velocity.y / boid.velocity.length() );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">bird.phase = ( bird.phase + ( Math.max( 0, bird.rotation.z ) + 0.1 ) ) % 62.83;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">bird.geometry.vertices[ 5 ].y = bird.geometry.vertices[ 4 ].y = Math.sin( bird.phase ) * 5;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">}</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">renderer.render( scene, camera );</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">}</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">&lt;/script&gt;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">&lt;/body&gt;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p2">&lt;/html&gt;</p>
      </td>
    </tr>
    <tr>
      <td valign="middle" class="td1">
        <p class="p1"><br></p>
      </td>
      <td valign="middle" class="td2">
        <p class="p1"><br></p>
      </td>
    </tr>
  </tbody>
</table>
</body>
</html>
